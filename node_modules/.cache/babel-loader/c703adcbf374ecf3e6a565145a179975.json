{"ast":null,"code":"var _jsxFileName = \"E:\\\\Work\\\\sharepro\\\\frontend\\\\src\\\\components\\\\Security.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport \"./security.css\";\nimport axios from \"axios\";\nimport { useNavigate } from \"react-router-dom\";\nimport DownloadPhoto from \"./DownloadPhoto\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Security = props => {\n  _s();\n\n  const {\n    id\n  } = props;\n  const apiUrl = \"http://localhost:4000/api/validation\";\n  const [wrongCount, setWrongCount] = useState(3);\n  let password;\n  const [photoURL, setPhotoURL] = useState();\n  const navigate = useNavigate();\n\n  const handleError = () => {\n    if (wrongCount === 1) {\n      navigate(\"/\");\n    } else {\n      setWrongCount(wrongCount - 1);\n      alert(\"Incorrect Password.\");\n    }\n  };\n\n  const handleSubmit = () => {\n    axios.patch(apiUrl, {\n      id,\n      password\n    }).then(r => r.data ? setPhotoURL(r.data.photoURL) : null).catch(e => e.response ? handleError() : null);\n  };\n\n  const handleChange = v => {\n    password = v;\n  };\n\n  const SecurityForm = () => {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"security-section-container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"upload-inputs-container show-warnings security-form\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Password Required\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 39,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"For Security Reasons you have to type the correct password set by the author of this perticular photo to access or download the image.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 40,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"input-primary\",\n          type: \"password\",\n          onChange: e => handleChange(e.target.value),\n          placeholder: \"Type Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 41,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"success-message\",\n          children: [\"After entering \", wrongCount, \" wrong passwords you will be redirected to the homepage.\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 42,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"hero-btn btn-upload\",\n          onClick: () => handleSubmit,\n          children: \"Access Photo\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 43,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 9\n    }, this);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: photoURL ? /*#__PURE__*/_jsxDEV(DownloadPhoto, {\n      url: photoURL\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 25\n    }, this) : /*#__PURE__*/_jsxDEV(SecurityForm, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 60\n    }, this)\n  }, void 0, false);\n};\n\n_s(Security, \"9+dp1ruQZt2DRGPlMqRCn5HCCqI=\", false, function () {\n  return [useNavigate];\n});\n\n_c = Security;\nexport default Security;\n\nvar _c;\n\n$RefreshReg$(_c, \"Security\");","map":{"version":3,"names":["React","useState","axios","useNavigate","DownloadPhoto","Security","props","id","apiUrl","wrongCount","setWrongCount","password","photoURL","setPhotoURL","navigate","handleError","alert","handleSubmit","patch","then","r","data","catch","e","response","handleChange","v","SecurityForm","target","value"],"sources":["E:/Work/sharepro/frontend/src/components/Security.js"],"sourcesContent":["import React,{useState} from \"react\";\r\nimport \"./security.css\";\r\nimport axios from \"axios\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nimport DownloadPhoto from \"./DownloadPhoto\";\r\n\r\nconst Security = (props)=>{\r\n    const {id} = props;\r\n    const apiUrl = \"http://localhost:4000/api/validation\";\r\n    const [wrongCount, setWrongCount] = useState(3);\r\n    let password;\r\n    const [photoURL, setPhotoURL] = useState();\r\n\r\n    const navigate = useNavigate();\r\n\r\n    const handleError = ()=>{\r\n        if(wrongCount === 1){\r\n            navigate(\"/\");\r\n        }else {\r\n            setWrongCount(wrongCount - 1);\r\n            alert(\"Incorrect Password.\")\r\n        }\r\n        \r\n    }\r\n\r\n    const handleSubmit = ()=>{\r\n        axios.patch(apiUrl, {id, password})\r\n        .then(r => r.data ? setPhotoURL(r.data.photoURL) : null)\r\n        .catch (e => e.response ? handleError() : null);\r\n    }\r\n    const handleChange = (v)=>{\r\n        password = v;\r\n    }\r\n    const SecurityForm = ()=>{\r\n        return(\r\n        <div className=\"security-section-container\">\r\n            <div className=\"upload-inputs-container show-warnings security-form\">\r\n                    <h2>Password Required</h2>\r\n                    <label>For Security Reasons you have to type the correct password set by the author of this perticular photo to access or download the image.</label>\r\n                    <input className=\"input-primary\" type=\"password\" onChange={(e)=> handleChange(e.target.value)} placeholder=\"Type Password\"></input>\r\n                    <p className=\"success-message\">After entering {wrongCount} wrong passwords you will be redirected to the homepage.</p>\r\n                    <button className=\"hero-btn btn-upload\" onClick={()=> handleSubmit}>Access Photo</button>\r\n            </div>\r\n        </div>\r\n    );\r\n    }\r\n\r\n    return(\r\n        <>\r\n            {photoURL ? <DownloadPhoto url={photoURL} /> : <SecurityForm />}\r\n        </>\r\n    )\r\n    \r\n};\r\n\r\n\r\nexport default Security;"],"mappings":";;;AAAA,OAAOA,KAAP,IAAcC,QAAd,QAA6B,OAA7B;AACA,OAAO,gBAAP;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,WAAT,QAA4B,kBAA5B;AAEA,OAAOC,aAAP,MAA0B,iBAA1B;;;;AAEA,MAAMC,QAAQ,GAAIC,KAAD,IAAS;EAAA;;EACtB,MAAM;IAACC;EAAD,IAAOD,KAAb;EACA,MAAME,MAAM,GAAG,sCAAf;EACA,MAAM,CAACC,UAAD,EAAaC,aAAb,IAA8BT,QAAQ,CAAC,CAAD,CAA5C;EACA,IAAIU,QAAJ;EACA,MAAM,CAACC,QAAD,EAAWC,WAAX,IAA0BZ,QAAQ,EAAxC;EAEA,MAAMa,QAAQ,GAAGX,WAAW,EAA5B;;EAEA,MAAMY,WAAW,GAAG,MAAI;IACpB,IAAGN,UAAU,KAAK,CAAlB,EAAoB;MAChBK,QAAQ,CAAC,GAAD,CAAR;IACH,CAFD,MAEM;MACFJ,aAAa,CAACD,UAAU,GAAG,CAAd,CAAb;MACAO,KAAK,CAAC,qBAAD,CAAL;IACH;EAEJ,CARD;;EAUA,MAAMC,YAAY,GAAG,MAAI;IACrBf,KAAK,CAACgB,KAAN,CAAYV,MAAZ,EAAoB;MAACD,EAAD;MAAKI;IAAL,CAApB,EACCQ,IADD,CACMC,CAAC,IAAIA,CAAC,CAACC,IAAF,GAASR,WAAW,CAACO,CAAC,CAACC,IAAF,CAAOT,QAAR,CAApB,GAAwC,IADnD,EAECU,KAFD,CAEQC,CAAC,IAAIA,CAAC,CAACC,QAAF,GAAaT,WAAW,EAAxB,GAA6B,IAF1C;EAGH,CAJD;;EAKA,MAAMU,YAAY,GAAIC,CAAD,IAAK;IACtBf,QAAQ,GAAGe,CAAX;EACH,CAFD;;EAGA,MAAMC,YAAY,GAAG,MAAI;IACrB,oBACA;MAAK,SAAS,EAAC,4BAAf;MAAA,uBACI;QAAK,SAAS,EAAC,qDAAf;QAAA,wBACQ;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA,QADR,eAEQ;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA,QAFR,eAGQ;UAAO,SAAS,EAAC,eAAjB;UAAiC,IAAI,EAAC,UAAtC;UAAiD,QAAQ,EAAGJ,CAAD,IAAME,YAAY,CAACF,CAAC,CAACK,MAAF,CAASC,KAAV,CAA7E;UAA+F,WAAW,EAAC;QAA3G;UAAA;UAAA;UAAA;QAAA,QAHR,eAIQ;UAAG,SAAS,EAAC,iBAAb;UAAA,8BAA+CpB,UAA/C;QAAA;UAAA;UAAA;UAAA;QAAA,QAJR,eAKQ;UAAQ,SAAS,EAAC,qBAAlB;UAAwC,OAAO,EAAE,MAAKQ,YAAtD;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA,QALR;MAAA;QAAA;QAAA;QAAA;MAAA;IADJ;MAAA;MAAA;MAAA;IAAA,QADA;EAWH,CAZD;;EAcA,oBACI;IAAA,UACKL,QAAQ,gBAAG,QAAC,aAAD;MAAe,GAAG,EAAEA;IAApB;MAAA;MAAA;MAAA;IAAA,QAAH,gBAAsC,QAAC,YAAD;MAAA;MAAA;MAAA;IAAA;EADnD,iBADJ;AAMH,CA/CD;;GAAMP,Q;UAOeF,W;;;KAPfE,Q;AAkDN,eAAeA,QAAf"},"metadata":{},"sourceType":"module"}